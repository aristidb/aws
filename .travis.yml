sudo: false
dist: bionic
language: generic

addons:
  apt:
    packages:
      - libgmp-dev

before_install:
  - unset CC
  # workaround Disallowing sources: hvr-ghc
  - sudo add-apt-repository ppa:hvr/ghc -y
  - sudo apt-get update -q
  - sudo apt-get install ghc-8.8.3 cabal-install-2.4 -y
  - export PATH="$HOME/.cabal/bin:/opt/ghc/bin:/opt/cabal/bin:$PATH"

install:
  - travis_retry cabal update
  - cabal install --only-dependencies -fexamples --enable-tests

script:
  - cabal configure -fexamples --enable-tests && cabal build
